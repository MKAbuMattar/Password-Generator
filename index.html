<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Password Generator</title>

    <meta name="description" content="Password Generator">
    <meta name="robots" content="index, follow">
    <meta name="keywords" content="Password Generator">
    <meta name="author" content="Mohammad Khaled Abu Mattar">
    <meta name="theme-color" content="#000000">

    <link rel="manifest" href="./manifest.json">

    <link rel="icon" href="./assets/icons/favicon.ico">
    <link rel="apple-touch-icon" href="./assets/icons/logo192.png">
    <link rel="stylesheet" href="./assets/css/style.css">
</head>

<body id="app">
    <noscript>Your browser does not support JavaScript!</noscript>
    <script src="./assets/js/script.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
	window.addEventListener('load', function () {
		navigator.serviceWorker.register('/Password-Generator/sw.js').then(function (registration) {
			// Registration was successful
			console.log('ServiceWorker registration successful with scope: ', registration
				.scope);
		}, function (err) {
			// registration failed :(
			console.log('ServiceWorker registration failed: ', err);
		});
	});
}

let deferredPrompt;
const addBtn = document.querySelector('.add-button');
addBtn.style.display = 'none';

window.addEventListener('beforeinstallprompt', (e) => {
	// Prevent Chrome 67 and earlier from automatically showing the prompt
	e.preventDefault();
	// Stash the event so it can be triggered later.
	deferredPrompt = e;
	// Update UI to notify the user they can add to home screen
	addBtn.style.display = 'block';

	addBtn.addEventListener('click', (e) => {
		// hide our user interface that shows our A2HS button
		addBtn.style.display = 'none';
		// Show the prompt
		deferredPrompt.prompt();
		// Wait for the user to respond to the prompt
		deferredPrompt.userChoice.then((choiceResult) => {
			if (choiceResult.outcome === 'accepted') {
				console.log('User accepted the A2HS prompt');
			} else {
				console.log('User dismissed the A2HS prompt');
			}
			deferredPrompt = null;
		});
	});
});

window.addEventListener("beforeinstallprompt", function (beforeInstallPromptEvent) {
	beforeInstallPromptEvent.preventDefault(); // Prevents immediate prompt display

	// Shows prompt after a user clicks an "install" button
	installButton.addEventListener("click", function (mouseEvent) {
		// you should not use the MouseEvent here, obviously
		beforeInstallPromptEvent.prompt();
	});

	installButton.hidden = false; // Make button operable
});
        </script>
</body>

</html>
